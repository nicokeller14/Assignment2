<!DOCTYPE html>
<html>
<head>
    <title>Hypermedia Environment</title>
</head>
<body>

<h2>Search Engine</h2>

<form id="form_id" action="/search" method="get">
    <input type="text" id="searchTerm" name="q">
    <button type="button" onclick="search()">Search</button>
    <button type="button" onclick="lucky()">I'm Feeling Lucky</button>
</form>

<div id="results"></div>

<script>

<!--INFO FOR TASK 3: The code runs either when connecting via "127.0.0.1" or when connecting to "localhost:80".-->

function search() {
    const searchTerm = document.getElementById('searchTerm').value;
    fetch(`/search?q=${searchTerm}`)
    .then(response => response.json())
    .then(data => {
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = data.map(url => `<a href="${url}">${url}</a><br>`).join('');
    });
}

function lucky() {
    const searchTerm = document.getElementById('searchTerm').value;
    fetch(`/lucky?q=${searchTerm}`)
    .then(response => response.text())
    .then(url => {
        window.location.href = url;  // directly use the returned URL
    });
}

</script>

</body>
</html>
